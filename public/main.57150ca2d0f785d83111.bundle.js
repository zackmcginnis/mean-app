webpackJsonp([1,4],{221:function(t,e,n){"use strict";n.d(e,"b",function(){return o}),n.d(e,"c",function(){return a}),n.d(e,"a",function(){return r});var o=function(){function t(){this.name="",this.price=0,this.totalDays=0,this.newFlag=!0}return t}(),a=function(){function t(){this.guestName="Enter guest name",this.guestDays=0,this.amountOwed=0,this.guestEmail="Enter guest email"}return t}(),r=function(){function t(){}return t}()},222:function(t,e,n){"use strict";var o=n(0),a=n(71);n.n(a);n.d(e,"a",function(){return s});var r=this&&this.__decorate||function(t,e,n,o){var a,r=arguments.length,i=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(i=(r<3?a(i):r>3?a(e,n,i):a(e,n))||i);return r>3&&i&&Object.defineProperty(e,n,i),i},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=function(){function t(){this.vacationUpdatedSource=new a.Subject,this.vacationUpdated$=this.vacationUpdatedSource.asObservable()}return t.prototype.updateVacation=function(t){console.log("from update service",t),this.vacationUpdatedSource.next(t)},t=r([n.i(o.Injectable)(),i("design:paramtypes",[])],t)}()},336:function(t,e,n){"use strict";var o=n(0),a=n(65),r=n(703),i=(n.n(r),n(42)),s=n(222),c=n(221);n.d(e,"a",function(){return p});var u=this&&this.__decorate||function(t,e,n,o){var a,r=arguments.length,i=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(i=(r<3?a(i):r>3?a(e,n,i):a(e,n))||i);return r>3&&i&&Object.defineProperty(e,n,i),i},l=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},p=function(){function t(t,e){this.authService=t,this.router=e,this.vacations=[],this.isLoading=!1,this.newvacation=new c.b}return t.prototype.ngOnInit=function(){this.getVacations()},t.prototype.getVacations=function(){var t=this;this.isLoading=!0,this.authService.getVacations().subscribe(function(e){t.vacations=e}),this.isLoading=!1,this.selectedVacation=void 0},t.prototype.select=function(t){this.selectedVacation=t},t.prototype.createVacation=function(){this.selectedVacation=this.newvacation,this.selectedVacation.name="New Vacation"},t=u([n.i(o.Component)({selector:"app-vacation-list",providers:[i.a,s.a],template:n(697),styles:[n(687)]}),l("design:paramtypes",["function"==typeof(e=void 0!==i.a&&i.a)&&e||Object,"function"==typeof(r=void 0!==a.b&&a.b)&&r||Object])],t);var e,r}()},337:function(t,e,n){"use strict";var o=n(0);n.d(e,"a",function(){return i});var a=this&&this.__decorate||function(t,e,n,o){var a,r=arguments.length,i=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(i=(r<3?a(i):r>3?a(e,n,i):a(e,n))||i);return r>3&&i&&Object.defineProperty(e,n,i),i},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},i=function(){function t(){}return t.prototype.validateRegister=function(t){return void 0!=t.name&&void 0!=t.email&&void 0!=t.username&&void 0!=t.password},t.prototype.validateEmail=function(t){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t)},t=a([n.i(o.Injectable)(),r("design:paramtypes",[])],t)}()},392:function(t,e){function n(t){throw new Error("Cannot find module '"+t+"'.")}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id=392},393:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(479),a=n(0),r=n(521),i=n(510);r.a.production&&n.i(a.enableProdMode)(),n.i(o.a)().bootstrapModule(i.a)},42:function(t,e,n){"use strict";var o=n(0),a=n(207),r=n(704),i=(n.n(r),n(526));n.n(i);n.d(e,"a",function(){return u});var s=this&&this.__decorate||function(t,e,n,o){var a,r=arguments.length,i=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(i=(r<3?a(i):r>3?a(e,n,i):a(e,n))||i);return r>3&&i&&Object.defineProperty(e,n,i),i},c=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},u=function(){function t(t){this.http=t,this.isDep=!0}return t.prototype.registerUser=function(t){var e=new a.Headers;e.append("Content-Type","application/json"),console.log("browser...",t);var n=this.prepEndpoint("users/register");return this.http.post(n,t,{headers:e}).map(function(t){return t.json()})},t.prototype.authenticateUser=function(t){var e=new a.Headers;e.append("Content-Type","application/json");var n=this.prepEndpoint("users/authenticate");return this.http.post(n,t,{headers:e}).map(function(t){return t.json()})},t.prototype.getProfile=function(){var t=new a.Headers;this.loadToken(),t.append("Authorization",this.authToken),t.append("Content-Type","application/json");var e=this.prepEndpoint("users/profile");return this.http.get(e,{headers:t}).map(function(t){return t.json()})},t.prototype.storeUserData=function(t,e){localStorage.setItem("id_token",t),localStorage.setItem("user",JSON.stringify(e)),this.authToken=t,this.user=e},t.prototype.loadToken=function(){var t=localStorage.getItem("id_token");this.authToken=t},t.prototype.loggedIn=function(){return n.i(i.tokenNotExpired)()},t.prototype.hasData=function(t){return void 0!=t},t.prototype.logout=function(){this.authToken=null,this.user=null,localStorage.clear()},t.prototype.addVacation=function(t){var e=new a.Headers;this.loadToken(),t.newFlag=!1,console.log(t);var n=this.prepEndpoint("users/vacations");return e.append("Authorization",this.authToken),e.append("Content-Type","application/json"),this.http.post(n,t,{headers:e}).map(function(t){return t.json()}).subscribe(function(t){return console.log(t)},function(t){return console.log(t)},function(){return console.log("yay")})},t.prototype.getVacations=function(){var t=new a.Headers;this.loadToken();var e=this.prepEndpoint("users/vacations");return t.append("Authorization",this.authToken),t.append("Content-Type","application/json"),this.http.get(e,{headers:t}).map(function(t){return t.json()})},t.prototype.updateVacation=function(t){var e=new a.Headers;this.loadToken();var n=this.prepEndpoint("users/vacations/edit");return e.append("Authorization",this.authToken),e.append("Content-Type","application/json"),this.http.put(n,t,{headers:e}).map(function(t){return t.json()}).subscribe(function(t){return console.log(t)},function(t){return console.log(t)},function(){return console.log("yay")})},t.prototype.deleteVacation=function(t){var e=new a.Headers;this.loadToken();var n=this.prepEndpoint("users/vacations/delete");return e.append("Authorization",this.authToken),console.log("deleting this vacation",t),e.append("Content-Type","application/json"),this.http.put(n,t,{headers:e}).map(function(t){return t.json()}).subscribe(function(t){return console.log(t)},function(t){return console.log(t)},function(){return console.log("yay")})},t.prototype.addGuest=function(t){var e=new a.Headers;this.loadToken();var n=this.prepEndpoint("users/vacations/guests");return e.append("Authorization",this.authToken),e.append("Content-Type","application/json"),this.http.post(n,t,{headers:e}).map(function(t){return t.json()})},t.prototype.getGuests=function(){var t=new a.Headers;this.loadToken();var e=this.prepEndpoint("users/vacations/guests");return t.append("Authorization",this.authToken),t.append("Content-Type","application/json"),this.http.get(e,{headers:t}).map(function(t){return t.json()})},t.prototype.updateGuests=function(t){var e=new a.Headers;this.loadToken();var n=this.prepEndpoint("users/vacations");return e.append("Authorization",this.authToken),e.append("Content-Type","application/json"),this.http.get(n,{headers:e}).map(function(t){return t.json()})},t.prototype.deleteGuest=function(t){var e=new a.Headers;this.loadToken();var n=this.prepEndpoint("users/vacations");return e.append("Authorization",this.authToken),e.append("Content-Type","application/json"),this.http.get(n,{headers:e}).map(function(t){return t.json()})},t.prototype.sendPdf=function(t){var e=new a.Headers;this.loadToken();var n=this.prepEndpoint("users/email");return e.append("Authorization",this.authToken),e.append("Content-Type","application/json"),this.http.post(n,t,{headers:e}).map(function(t){return t.json()}).subscribe(function(t){return console.log(t)},function(t){return console.log(t)},function(){return console.log("yay")})},t.prototype.prepEndpoint=function(t){return this.isDep?t:"http://localhost:3000/"+t},t=s([n.i(o.Injectable)(),c("design:paramtypes",["function"==typeof(e=void 0!==a.Http&&a.Http)&&e||Object])],t);var e}()},509:function(t,e,n){"use strict";var o=n(0);n.d(e,"a",function(){return i});var a=this&&this.__decorate||function(t,e,n,o){var a,r=arguments.length,i=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(i=(r<3?a(i):r>3?a(e,n,i):a(e,n))||i);return r>3&&i&&Object.defineProperty(e,n,i),i},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},i=function(){function t(){this.title="app works!"}return t=a([n.i(o.Component)({selector:"app-root",template:n(689),styles:[n(679)]}),r("design:paramtypes",[])],t)}()},510:function(t,e,n){"use strict";var o=n(150),a=n(0),r=n(307),i=n(207),s=n(65),c=n(509),u=n(514),l=n(513),p=n(516),f=n(512),d=n(511),h=n(515),v=n(336),g=n(518),b=n(337),m=n(42),y=n(153),j=(n.n(y),n(519)),R=n(517);n.d(e,"a",function(){return _});var w=this&&this.__decorate||function(t,e,n,o){var a,r=arguments.length,i=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(i=(r<3?a(i):r>3?a(e,n,i):a(e,n))||i);return r>3&&i&&Object.defineProperty(e,n,i),i},O=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},k=[{path:"",component:f.a},{path:"register",component:p.a},{path:"login",component:l.a},{path:"dashboard",component:d.a,canActivate:[j.a]},{path:"profile",component:h.a,canActivate:[j.a]},{path:"vacations",component:v.a,canActivate:[j.a]}],_=function(){function t(){}return t=w([n.i(a.NgModule)({declarations:[c.a,u.a,l.a,p.a,f.a,d.a,h.a,v.a,g.a,g.a,R.a],imports:[o.a,r.a,r.b,i.HttpModule,s.a.forRoot(k),y.FlashMessagesModule],providers:[b.a,m.a,j.a],bootstrap:[c.a]}),O("design:paramtypes",[])],t)}()},511:function(t,e,n){"use strict";var o=n(0);n.d(e,"a",function(){return i});var a=this&&this.__decorate||function(t,e,n,o){var a,r=arguments.length,i=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(i=(r<3?a(i):r>3?a(e,n,i):a(e,n))||i);return r>3&&i&&Object.defineProperty(e,n,i),i},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},i=function(){function t(){}return t.prototype.ngOnInit=function(){},t=a([n.i(o.Component)({selector:"app-dashboard",template:n(690),styles:[n(680)]}),r("design:paramtypes",[])],t)}()},512:function(t,e,n){"use strict";var o=n(0);n.d(e,"a",function(){return i});var a=this&&this.__decorate||function(t,e,n,o){var a,r=arguments.length,i=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(i=(r<3?a(i):r>3?a(e,n,i):a(e,n))||i);return r>3&&i&&Object.defineProperty(e,n,i),i},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},i=function(){function t(){}return t.prototype.ngOnInit=function(){},t=a([n.i(o.Component)({selector:"app-home",template:n(691),styles:[n(681)]}),r("design:paramtypes",[])],t)}()},513:function(t,e,n){"use strict";var o=n(0),a=n(42),r=n(65),i=n(153);n.n(i);n.d(e,"a",function(){return u});var s=this&&this.__decorate||function(t,e,n,o){var a,r=arguments.length,i=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(i=(r<3?a(i):r>3?a(e,n,i):a(e,n))||i);return r>3&&i&&Object.defineProperty(e,n,i),i},c=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},u=function(){function t(t,e,n){this.authService=t,this.router=e,this.flashMessage=n}return t.prototype.ngOnInit=function(){},t.prototype.onLoginSubmit=function(){var t=this,e={username:this.username,password:this.password};this.authService.authenticateUser(e).subscribe(function(e){e.success?(t.authService.storeUserData(e.token,e.user),t.flashMessage.show("You are now logged in",{cssClass:"alert-success",timeout:5e3}),t.router.navigate(["dashboard"])):(t.flashMessage.show(e.msg,{cssClass:"alert-danger",timeout:5e3}),t.router.navigate(["login"]))})},t=s([n.i(o.Component)({selector:"app-login",template:n(692),styles:[n(682)]}),c("design:paramtypes",["function"==typeof(e=void 0!==a.a&&a.a)&&e||Object,"function"==typeof(u=void 0!==r.b&&r.b)&&u||Object,"function"==typeof(l=void 0!==i.FlashMessagesService&&i.FlashMessagesService)&&l||Object])],t);var e,u,l}()},514:function(t,e,n){"use strict";var o=n(0),a=n(42),r=n(65),i=n(153);n.n(i);n.d(e,"a",function(){return u});var s=this&&this.__decorate||function(t,e,n,o){var a,r=arguments.length,i=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(i=(r<3?a(i):r>3?a(e,n,i):a(e,n))||i);return r>3&&i&&Object.defineProperty(e,n,i),i},c=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},u=function(){function t(t,e,n){this.authService=t,this.router=e,this.flashMessage=n}return t.prototype.ngOnInit=function(){},t.prototype.onLogoutClick=function(){return this.authService.logout(),this.flashMessage.show("You are logged out",{cssClass:"alert-success",timeout:3e3}),this.router.navigate(["/login"]),!1},t=s([n.i(o.Component)({selector:"app-navbar",template:n(693),styles:[n(683)]}),c("design:paramtypes",["function"==typeof(e=void 0!==a.a&&a.a)&&e||Object,"function"==typeof(u=void 0!==r.b&&r.b)&&u||Object,"function"==typeof(l=void 0!==i.FlashMessagesService&&i.FlashMessagesService)&&l||Object])],t);var e,u,l}()},515:function(t,e,n){"use strict";var o=n(0),a=n(42),r=n(65);n.d(e,"a",function(){return c});var i=this&&this.__decorate||function(t,e,n,o){var a,r=arguments.length,i=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(i=(r<3?a(i):r>3?a(e,n,i):a(e,n))||i);return r>3&&i&&Object.defineProperty(e,n,i),i},s=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},c=function(){function t(t,e){this.authService=t,this.router=e}return t.prototype.ngOnInit=function(){var t=this;this.authService.getProfile().subscribe(function(e){t.user=e.user},function(t){return console.log(t),!1})},t=i([n.i(o.Component)({selector:"app-profile",template:n(694),styles:[n(684)]}),s("design:paramtypes",["function"==typeof(e=void 0!==a.a&&a.a)&&e||Object,"function"==typeof(c=void 0!==r.b&&r.b)&&c||Object])],t);var e,c}()},516:function(t,e,n){"use strict";var o=n(0),a=n(337),r=n(42),i=n(153),s=(n.n(i),n(65));n.d(e,"a",function(){return l});var c=this&&this.__decorate||function(t,e,n,o){var a,r=arguments.length,i=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(i=(r<3?a(i):r>3?a(e,n,i):a(e,n))||i);return r>3&&i&&Object.defineProperty(e,n,i),i},u=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},l=function(){function t(t,e,n,o){this.validateService=t,this.flashMessage=e,this.authService=n,this.router=o}return t.prototype.ngOnInit=function(){},t.prototype.onRegisterSubmit=function(){var t=this,e={name:this.name,email:this.email,username:this.username,password:this.password};return this.validateService.validateRegister(e)?this.validateService.validateEmail(e.email)?void this.authService.registerUser(e).subscribe(function(e){e.success?(t.flashMessage.show("You are now registered and can log in",{cssClass:"alert-success",timeout:3e3}),t.router.navigate(["/login"])):(t.flashMessage.show("Something went wrong",{cssClass:"alert-danger",timeout:3e3}),t.router.navigate(["/register"]))}):(this.flashMessage.show("Please use a valid email",{cssClass:"alert-danger",timeout:3e3}),!1):(this.flashMessage.show("Please fill in all fields",{cssClass:"alert-danger",timeout:3e3}),!1)},t=c([n.i(o.Component)({selector:"app-register",template:n(695),styles:[n(685)]}),u("design:paramtypes",["function"==typeof(e=void 0!==a.a&&a.a)&&e||Object,"function"==typeof(l=void 0!==i.FlashMessagesService&&i.FlashMessagesService)&&l||Object,"function"==typeof(p=void 0!==r.a&&r.a)&&p||Object,"function"==typeof(f=void 0!==s.b&&s.b)&&f||Object])],t);var e,l,p,f}()},517:function(t,e,n){"use strict";var o=n(0),a=n(42),r=n(520),i=n(222),s=n(221),c=n(677);n.n(c);n.d(e,"a",function(){return p});var u=this&&this.__decorate||function(t,e,n,o){var a,r=arguments.length,i=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(i=(r<3?a(i):r>3?a(e,n,i):a(e,n))||i);return r>3&&i&&Object.defineProperty(e,n,i),i},l=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},p=function(){function t(t,e,n){this.pdfService=t,this.authService=e,this.updateService=n,this.send=!1}return t.prototype.ngOnInit=function(){var t=this;this.authService.getProfile().subscribe(function(e){t.user=e.user},function(t){return console.log(t),!1})},t.prototype.ngOnChanges=function(t){console.log(t),this.vacation=t.vacation.currentValue},t.prototype.downloadPdf=function(){var t=new c;t.text(10,10,"PRICE BREAKDOWN OF YOUR VACATION"),t.text(10,20,"---------------------------------------------------");for(var e=20,n=0,o=1,a=0,r=this.guests;a<r.length;a++){var i=r[a],s="Name: "+i.guestName,u="Vacation Price: $"+(Math.round(100*this.vacation.price)/100).toString(),l="Total Days Booked By All (cumulative): "+this.vacation.totalDays.toString(),p="Price Per Vacation Day: $"+(Math.round(this.vacation.price/this.vacation.totalDays*100)/100).toString(),f="Days Booked By This Guest: "+i.guestDays.toString(),d="Amount Owed By This Guest: $"+(Math.round(100*i.amountOwed)/100).toString();if(0!=n&&n%3==0){t.addPage(),o++,e=20;var h="PRICE BREAKDOWN OF YOUR VACATION - Page "+o.toString();t.text(10,10,h),t.text(10,20,"---------------------------------------------------")}e+=10,t.text(20,e,s),e+=10,t.text(20,e,u),e+=10,t.text(20,e,l),e+=10,t.text(20,e,p),e+=10,t.text(20,e,f),e+=10,t.text(20,e,d),e+=10,t.text(20,e,"---------------------------------------------------"),n++}if(1==this.send)return t;t.save("vacation-price-breakdown.pdf")},t.prototype.sendAll=function(){this.send=!0;var t=[],e=this.downloadPdf();console.log(this.user);for(var n=0,o=this.guests;n<o.length;n++){var a=o[n];t.push(a.guestEmail)}var r=new s.a;r.pdfDoc=e.output("datauristring"),r.emailList=t,this.authService.sendPdf(r),console.log(r),this.send=!1},u([n.i(o.Input)(),l("design:type","function"==typeof(e=void 0!==s.b&&s.b)&&e||Object)],t.prototype,"vacation",void 0),u([n.i(o.Input)(),l("design:type",Array)],t.prototype,"guests",void 0),t=u([n.i(o.Component)({selector:"app-result",providers:[a.a,i.a,r.a],template:n(696),styles:[n(686)]}),l("design:paramtypes",["function"==typeof(p=void 0!==r.a&&r.a)&&p||Object,"function"==typeof(f=void 0!==a.a&&a.a)&&f||Object,"function"==typeof(d=void 0!==i.a&&i.a)&&d||Object])],t);var e,p,f,d}()},518:function(t,e,n){"use strict";var o=n(0),a=n(307),r=n(42),i=n(222),s=n(336),c=n(221);n.d(e,"a",function(){return p});var u=this&&this.__decorate||function(t,e,n,o){var a,r=arguments.length,i=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(i=(r<3?a(i):r>3?a(e,n,i):a(e,n))||i);return r>3&&i&&Object.defineProperty(e,n,i),i},l=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},p=function(){function t(t,e,n,o,a,r,i){this.fb=t,this.authService=e,this.updateService=n,this.cdr=o,this.zone=a,this.ApplicationRef=r,this.vlist=i,this.savedGuests=[],this.createForm()}return t.prototype.createForm=function(){this.vacationForm=this.fb.group({name:"",price:0,guests:this.fb.array([])})},t.prototype.ngOnChanges=function(){this.vacationForm.reset({name:this.vacation.name,price:this.vacation.price,totalDays:this.vacation.totalDays}),this.setGuests(this.vacation.guests)},Object.defineProperty(t.prototype,"guests",{get:function(){return this.vacationForm.get("guests")},enumerable:!0,configurable:!0}),t.prototype.setGuests=function(t){var e=this;if(void 0==t)var n=null,o=null;else{var n=t.map(function(t){return e.fb.group(t)}),o=this.fb.array(n);this.vacationForm.setControl("guests",o)}},t.prototype.addGuest=function(){this.guests.push(this.fb.group(new c.c))},t.prototype.onSubmit=function(){this.vacation=this.prepareSaveVacation();for(var t=0,e=0;e<this.vacation.guests.length;e++)t+=this.vacation.guests[e].guestDays;this.vacation.totalDays=t,this.vacation.guests=this.calculateTotal(this.vacation,this.vacation.guests),this.vacation.newFlag?this.authService.addVacation(this.vacation):this.authService.updateVacation(this.vacation),this.ngOnChanges()},t.prototype.prepareSaveVacation=function(){var t=this.vacationForm.value,e=t.guests.map(function(t){return Object.assign({},t)}),n={name:t.name,price:t.price,totalDays:this.vacation.totalDays,guests:e,newFlag:this.vacation.newFlag};return n._id=this.vacation._id,n},t.prototype.deleteGuest=function(t){this.guests.removeAt(t)},t.prototype.revert=function(){this.ngOnChanges()},t.prototype.delete=function(){this.authService.deleteVacation(this.vacation),console.log("deleting existing vacation")},t.prototype.calculateTotal=function(t,e){var n,o=t.guests,a=t.price,r=t.totalDays;n=a/r;for(var i=0,s=o;i<s.length;i++){var c=s[i];if(0==r)return e;c.amountOwed=c.guestDays*n}return e},u([n.i(o.Input)(),l("design:type","function"==typeof(e=void 0!==c.b&&c.b)&&e||Object)],t.prototype,"vacation",void 0),t=u([n.i(o.Component)({selector:"app-vacation",providers:[r.a,i.a],template:n(698),styles:[n(688)]}),l("design:paramtypes",["function"==typeof(p=void 0!==a.c&&a.c)&&p||Object,"function"==typeof(f=void 0!==r.a&&r.a)&&f||Object,"function"==typeof(d=void 0!==i.a&&i.a)&&d||Object,"function"==typeof(h=void 0!==o.ChangeDetectorRef&&o.ChangeDetectorRef)&&h||Object,"function"==typeof(v=void 0!==o.NgZone&&o.NgZone)&&v||Object,"function"==typeof(g=void 0!==o.ApplicationRef&&o.ApplicationRef)&&g||Object,"function"==typeof(b=void 0!==s.a&&s.a)&&b||Object])],t);var e,p,f,d,h,v,g,b}()},519:function(t,e,n){"use strict";var o=n(0),a=n(65),r=n(42);n.d(e,"a",function(){return c});var i=this&&this.__decorate||function(t,e,n,o){var a,r=arguments.length,i=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(i=(r<3?a(i):r>3?a(e,n,i):a(e,n))||i);return r>3&&i&&Object.defineProperty(e,n,i),i},s=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},c=function(){function t(t,e){this.authService=t,this.router=e}return t.prototype.canActivate=function(){return!!this.authService.loggedIn()||(this.router.navigate(["/login"]),!1)},t=i([n.i(o.Injectable)(),s("design:paramtypes",["function"==typeof(e=void 0!==r.a&&r.a)&&e||Object,"function"==typeof(c=void 0!==a.b&&a.b)&&c||Object])],t);var e,c}()},520:function(t,e,n){"use strict";var o=n(0);n.d(e,"a",function(){return i});var a=this&&this.__decorate||function(t,e,n,o){var a,r=arguments.length,i=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(i=(r<3?a(i):r>3?a(e,n,i):a(e,n))||i);return r>3&&i&&Object.defineProperty(e,n,i),i},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},i=function(){function t(){}return t=a([n.i(o.Injectable)(),r("design:paramtypes",[])],t)}()},521:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o={production:!0}},679:function(t,e){t.exports=""},680:function(t,e){t.exports=""},681:function(t,e){t.exports="#all{font-family:source_sans_pro,Helvetica Neue,Helvetica,Arial,sans-serif}#lead{background-color:#e7e7e7}#cols{text-align:center}.row #left{color:#fff;background-color:#337ab7}.row #mid{background-color:#e7e7e7}.row #right{color:#fff;background-color:#337ab7}"},682:function(t,e){t.exports=""},683:function(t,e){t.exports="#mainbar{font-family:source_sans_pro,Helvetica Neue,Helvetica,Arial,sans-serif;background-color:#337ab7;border-color:#2e6da4}#navbar .active,#navbar a:active,#navbar a:hover{background-color:#}.nav-pills>li.active>a,.nav-pills>li.active>a:focus,.nav-pills>li.active>a:hover{background-color:#}#hamburger{color:#fff;background-color:#fff;border-color:#fff}#brand,#dash,#home,#login,#logout,#profile,#register,#vacations{color:#fff}"},684:function(t,e){t.exports=""},685:function(t,e){t.exports=""},686:function(t,e){t.exports="#guesttemp{border-bottom:dashed;border-width:1px}#pdf{border:none;margin:10px}#bottomborder{border-bottom:dashed;border-width:1px}#output{text-align:right}h4,label{font-size:large}"},687:function(t,e){t.exports="#list,#rightside{text-align:center}.list-group-item{margin:1px;text-align:center}#atag,.list-group-item :active{display:block}"},688:function(t,e){t.exports="#delete{float:right}#eachguest{border-bottom:dashed;border-width:1px}#result{text-align:center;background-color:#e7e7e7}"},689:function(t,e){t.exports='<div id="all">\n\t<app-navbar></app-navbar>\n\t<div class="container" id="main">\n\t  <flash-messages></flash-messages>\n\t  <router-outlet></router-outlet>\n\t</div>\n</div>'},690:function(t,e){t.exports='<h2 class="page-header">Dashboard</h2>\n<p>Under construction</p>\n'},691:function(t,e){t.exports='<div id="all">\n  <div class="jumbotron text-center" id="lead">\n    <h1>Group Vacation Calculator</h1>\n    <p class="leadtext">Welcome to our custom vacation calculator. This service provides a cost breakdown to each guest on the vacation proportional to the days they will attend the vacation. </p>\n    <div>\n      <a class="btn btn-primary" [routerLink]="[\'/register\']">Register</a> <a class="btn btn-default" [routerLink]="[\'/login\']">Login</a>\n    </div>\n  </div>\n\n  <div class="row" id="cols">\n    <div class="col-md-4" id="left">\n      <h3>End conflicts among guests</h3>\n      <p>Eliminate the challenges of determining who owes what amount when traveling on a multi-day, multi-guest vacation</p>\n    </div>\n    <div class="col-md-4" id="mid">\n      <h3>Send them a cost breakdown</h3>\n      <p>Our printable pdf service can also be sent to your guest\'s email addresses, showing exactly who owes what and why</p>\n    </div>\n    <div class="col-md-4" id="right">\n      <h3>Connect with Airbnb/Venmo </h3>\n      <p>To be added in the future</p>\n    </div>\n  </div>\n</div>'},692:function(t,e){t.exports='<h2 class="page-header">Login</h2>\n<form (submit)="onLoginSubmit()">\n  <div class="form-group">\n    <label>Username</label>\n    <input type="text" class="form-control" [(ngModel)]="username" name="username">\n  </div>\n  <div class="form-group">\n    <label>Password</label>\n    <input type="password" class="form-control" [(ngModel)]="password" name="password">\n  </div>\n  <input type="submit" class="btn btn-primary" value="Login">\n</form>\n'},693:function(t,e){t.exports='<nav class="navbar navbar-default" id="mainbar">\n      <div class="container">\n        <div class="navbar-header">\n          <button type="button" class="navbar-toggle collapsed" id="hamburger" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">\n            <span class="sr-only">Toggle navigation</span>\n            <span class="icon-bar"></span>\n            <span class="icon-bar"></span>\n            <span class="icon-bar"></span>\n          </button>\n          <a class="navbar-brand" id="brand" href="#">Vacation Calculator</a>\n        </div>\n\n        <div id="navbar" class="collapse navbar-collapse">\n        <!--\n          <ul class="nav navbar-nav navbar-left">\n            <li [routerLinkActive]="[\'active\']" [routerLinkActiveOptions] = "{exact:true}"><a id="home" [routerLink]="[\'/\']">Home</a></li>\n          </ul>\n        -->\n\n          <ul class="nav navbar-nav navbar-right">\n            <li *ngIf="authService.loggedIn()" [routerLinkActive]="[\'active\']" [routerLinkActiveOptions] = "{exact:true}"><a id="dash" [routerLink]="[\'/dashboard\']">Dashboard</a></li>\n            <li *ngIf="authService.loggedIn()" [routerLinkActive]="[\'active\']" [routerLinkActiveOptions] = "{exact:true}"><a id="profile" [routerLink]="[\'/profile\']">Profile</a></li>\n            <li *ngIf="authService.loggedIn()" [routerLinkActive]="[\'active\']" [routerLinkActiveOptions] = "{exact:true}"><a id="vacations" [routerLink]="[\'/vacations\']">Vacations</a></li>\n\n            <li *ngIf="!authService.loggedIn()" [routerLinkActive]="[\'active\']" [routerLinkActiveOptions] = "{exact:true}"><a id="login" [routerLink]="[\'/login\']">Login</a></li>\n            <li *ngIf="!authService.loggedIn()" [routerLinkActive]="[\'active\']" [routerLinkActiveOptions] = "{exact:true}"><a id="register" [routerLink]="[\'/register\']">Register</a></li>\n            <li *ngIf="authService.loggedIn()"><a id="logout" (click)="onLogoutClick()" href="#">Logout</a></li>\n            <!--\n            <li class="dropdown">\n            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Dropdown <span class="caret"></span></a>\n            <ul class="dropdown-menu">\n            <li><a href="#">FAQ 1</a></li>\n            <li><a href="#">FAQ 2</a></li>\n            <li><a href="#">FAQ 3</a></li>\n            <li role="separator" class="divider"></li>\n            </ul>\n            </li>\n            -->          \n          </ul>\n        </div><!--/.nav-collapse -->\n\n      </div>\n    </nav>\n'},694:function(t,e){t.exports='<div *ngIf="user">\r\n  <h2 class="page-header">{{user.name}}</h2>\r\n  <ul class="list-group">\r\n    <li class="list-group-item">Username: {{user.username}}</li>\r\n    <li class="list-group-item">Email: {{user.email}}</li>\r\n  </ul>\r\n\r\n</div>\r\n'},695:function(t,e){t.exports='<h2 class="page-header">Register</h2>\n<form (submit)="onRegisterSubmit()">\n  <div class="form-group">\n    <label>Name</label>\n    <input type="text" [(ngModel)]="name" name="name" class="form-control">\n  </div>\n  <div class="form-group">\n    <label>Username</label>\n    <input type="text" [(ngModel)]="username" name="username" class="form-control">\n  </div>\n  <div class="form-group">\n    <label>Email</label>\n    <input type="text" [(ngModel)]="email" name="email" class="form-control" >\n  </div>\n  <div class="form-group">\n    <label>Password</label>\n    <input type="password" [(ngModel)]="password" name="password" class="form-control">\n  </div>\n  <input type="submit" class="btn btn-primary" value="Submit">\n</form>\n'},696:function(t,e){t.exports='<div id="main" *ngIf="!vacation.newFlag">\r\n  <div id="bottomborder">\r\n          <h2>Pricing Breakdown</h2>\r\n  </div>\r\n  <div id="hasdata">\r\n    <div *ngFor="let guest of guests; let i=index" [attr.data-index]="i" id="guesttemp">\r\n      <!-- The repeated guest template -->\r\n      <h4>Guest #{{i + 1}}</h4>\r\n      <div id="output">\r\n      \t\t<label>Name: {{guest.guestName}}\r\n\r\n            </label>\r\n           <br><br>\r\n            <label>Vacation Price: ${{vacation.price | number : \'1.2-2\'}}\r\n\r\n            </label>\r\n            <br><br>\r\n            <label>Total days booked by all guests: {{vacation.totalDays}}\r\n\r\n            </label>\r\n            <br><br>\r\n            <label>Price per vacation day: ${{(vacation.price / vacation.totalDays) | number : \'1.2-2\'}}\r\n\r\n            </label>            \r\n           <br><br>\r\n            <label>Days booked by this guest: {{guest.guestDays}}\r\n\r\n            </label>\r\n            <br><br>\r\n            <label>Amount owed by this guest: ${{guest.amountOwed | number : \'1.2-2\'}}\r\n\r\n            </label>\r\n            <!-- output of math-->\r\n      </div>\r\n    </div>\r\n\r\n  <div id="pdf">\r\n    <button type="button" class="btn btn-default" (click)="downloadPdf()">\r\n      <span class="glyphicon glyphicon-print"></span> Download PDF\r\n    </button>\r\n    <button type="button" class="btn btn-default" (click)="sendAll()">\r\n      <span class="glyphicon glyphicon-envelope"></span> Email PDF to guests\r\n    </button>\r\n  </div>\r\n</div>\r\n'},697:function(t,e){t.exports='<h3 *ngIf="isLoading"><i>Loading vacations ... </i></h3>\r\n\r\n<nav>\r\n  <button (click)="getVacations()" class="btn btn-secondary">Refresh</button>\r\n  <button (click)="createVacation()" class="btn btn-primary">Create</button>\r\n</nav>\r\n\r\n<div class="row">\r\n\t<div class="col-sm-4" id="list">\r\n\t<h2 *ngIf="!isLoading">Select a vacation:</h2>\r\n\t\t<div class="list-group">\r\n\t\t  <a *ngFor="let vacation of vacations" (click)="select(vacation)" id="atag">\r\n\t\t\t<div class="list-group-item active">\r\n\t\t\t{{vacation.name}}\r\n\t\t\t</div>\t\t\r\n\t\t  </a>\r\n\t\t</div> \r\n\t</div>\r\n\t<div class="col-sm-8" id="rightside" *ngIf="selectedVacation">\r\n\t  <app-vacation [vacation]="selectedVacation"></app-vacation>\r\n\t</div>\r\n</div>'},698:function(t,e){t.exports='<div class="row">  \r\n  <div class="col-sm-6" id="detail">\r\n    <h2>Vacation Detail</h2>\r\n    <h3>Editing: {{vacation.name}}</h3>\r\n      <form [formGroup]="vacationForm" (ngSubmit)="onSubmit()" novalidate>\r\n        <div style="margin-bottom: 1em">\r\n          <button type="submit"\r\n                  [disabled]="vacationForm.pristine" class="btn btn-success">Submit</button>\r\n          <button type="reset" (click)="revert()"\r\n                  [disabled]="vacationForm.pristine" class="btn btn-warning">Revert</button>\r\n          <button type="delete" (click)="delete()"\r\n                   class="btn btn-danger">Delete Vacation</button>\r\n        </div>\r\n        <!-- Vacation Detail Controls -->\r\n        <div class="form-group" id="nameandprice">\r\n            <label>Name of vacation:\r\n              <input class="form-control" formControlName="name" required>\r\n            </label>\r\n            <br><br>\r\n            <label>Price of vacation:\r\n              <input class="form-control" formControlName="price" required>\r\n            </label>\r\n        </div>\r\n\r\n        <div formArrayName="guests" class="well well-lg">\r\n          <div *ngFor="let guest of guests.controls; let i=index" [formGroupName]="i" >\r\n            <!-- The repeated guest template -->\r\n            <h4>Guest #{{i + 1}}</h4>\r\n            <div id="output">\r\n                  <!-- output of math-->\r\n            </div>\r\n              <div class="form-group" id="eachguest">\r\n                <button id="delete" (click)="deleteGuest(i)" class="btn btn-danger">Delete Guest</button>\r\n                  <label>Name:\r\n                    <input class="form-control" formControlName="guestName" required>\r\n                  </label>\r\n                  <br><br>\r\n                  <label>Total days:\r\n                    <input class="form-control" type="number" formControlName="guestDays" required>\r\n                  </label>\r\n                  <br><br>\r\n                  <label>Email Address:\r\n                    <input class="form-control" formControlName="guestEmail" required>\r\n                  </label>\r\n              </div>\r\n            </div>\r\n\r\n            <br>\r\n            <!-- End of the repeated address template -->\r\n         \r\n          <button (click)="addGuest()" type="button">Add another guest</button>\r\n          <button type="submit"\r\n                  [disabled]="vacationForm.pristine" class="btn btn-success">Submit</button>\r\n        </div>\r\n      </form>\r\n  </div>\r\n\r\n  <div class="col-sm-6" id="result" *ngIf="vacation && (!vacation.isNew)">\r\n    <app-result [vacation]="vacation" [guests]="vacation.guests"></app-result>\r\n  </div>\r\n</div>\r\n  <!--\r\n  <p>vacationForm value: {{ vacationForm.value | json}}</p>\r\n  <h4>Name change log</h4>\r\n  <div *ngFor="let name of nameChangeLog">{{name}}</div>\r\n  -->'},722:function(t,e,n){t.exports=n(393)}},[722]);